<launch>
    <!-- Hyperparameter -->
    <arg name="map_name" default="hma_wrs"/>
    <arg name="rtabmap" default="false"/>
    <arg name="simulator" default="false"/>
    <arg name="max_distance" default="2.5"/>
    <arg name="tracking" default="false"/>
    <arg name="wholebody" default="true"/>
    <arg name="auto_start" default="true"/>
    <arg name="action_recognition" default="true"/>

    <!-- offline slam -->
    <group if="$(arg rtabmap)">
        <include file="$(find tam_slam)/launch/include/rtabmap.launch">
            <arg name="use_sim_time"  default="$(arg simulator)"/>
            <arg name="database_path" default="$(find tam_slam)/map/$(arg map_name).db"/>
            <arg name="localization"  default="true"/>
            <arg name="rviz"  default="false"/>
        </include>
    </group>

    <!-- action recognition -->
    <node pkg="tam_mmaction2" type="action_recognition_server.py" name="action_recognition_server" output="screen">
        <param name="/max_distance" type="double" value="$(arg max_distance)"/>
        <param name="/tracking" type="bool" value="$(arg tracking)"/>
        <param name="/is_wholebody" type="bool" value="$(arg wholebody)"/>
        <param name="/auto_start" type="bool" value="$(arg auto_start)"/>
        <param name="/is_action_recognition" type="bool" value="$(arg action_recognition)"/>
    </node>
    
    <node pkg="rviz" type="rviz" name="rviz_pose_result" args="-d $(find tam_mmaction2)/io/rviz/action_recognition.rviz"/>

</launch>

